## Синхронизация каталогов

### Исходные условия
* Требуется реализовать приложение, которое в качестве параметров получает путь к двум директориям (исходной и ее копии) и выполняет их синхронизацию.
* Нужна полная синхронизацию: чтобы при добавлении/удалении файла из одной папки, вторая полностью его повторяла (в том числе права на файлы)

### Реализация
Приложение синхронизирует две директории. Пути передаются в качестве параметров:
- первый параметр - исходная директория (источник)
- второй параметр - копия исходной.

Синхронизация выполняется в фоне. Все файлы из источника копируются во вторую директорию. При этом, если файл с таким именем уже есть, то два файла сравниваются по их хешам. Если хеши совпадают, то файл не копируется.
Одновременно (в отдельной горутине) из второй директории удаляются файлы, которых нет в директории-источнике.

Чтобы исключить работу над одним и тем же файлом в разных горутинах, реализован реестр (пакет dispenser). В нем хранятся пути к файлам которые в данный момент копируются или удаляются.
Вся работа с реестром (запись, чтение и удаление из map) ведется безопасным для асинхронности способом через мютексы пакета sync.
Используются каналы и context.

После копирования устанавливаются такие же права на созданный файл, как и у оригинала.

Отслеживается нажатие клавиш. Если нажата клавиша ESC, приложение завершает работу.

### Тестирование
- Основные функции покрыты тестами
- На функции копирования и удаления файлов написаны benchmarks

Для запуска тестов нужно выполнить:
- make test

При этом будут сгенерированы моки интерфейсов через //go:generate mockgen, который указан в каждом интерфейсе

### How to use
Для упрощения работы в корне проекта есть Makefile, в котором содержатся основные команды. Например, для сборки файла необходимо выполнить
- make build.

Собранный файл будет сохранен в каталоге build. Запуск файла:
```shell
./build/resync ../experimental/fold1 ../experimental/fold2
```

Для запуска без сборки нужно выполнить

- make run fold1 fold2

либо:

```shell
go run ./cmd/app/. ../experimental/fold1 ../experimental/fold2
```

Описание остальных команд смотрите в makefile

### Логирование
Все операции с файлами (копирование, удаление) записываются в файл log.txt с указанием времени, типа операции и размера файла. Логирование реализовано в пакете internal/witness.
Пакет использует встроенные GoLang логгер, и при инициализации основной структуры возможность задается вывод в файл
